---
title: å°† Web åº”ç”¨ä¸¢ç»™å®ˆæŠ¤è¿›ç¨‹
toc: true
comments: true
popular_posts: false
mathjax: true
top: false
date: 2020-06-21 14:26:36
tags: æœåŠ¡å™¨è¿›ç¨‹ç®¡ç†
categories: Linux
thumbnail: https://tse4-mm.cn.bing.net/th/id/OIP.9uFp2lB4VhDn_e5sY749aQHaE2?pid=Api&rs=1
---

æœ€è¿‘è€æ˜¯è¦æŠŠ Web App/Service éƒ¨ç½²åœ¨ä¸ªäººçš„æœåŠ¡å™¨ä¸Šè¿›è¡Œæµ‹è¯•ï¼Œå‘ç°è‡ªå·±ä¸æ€ä¹ˆç†Ÿæ‚‰ã€Œå‰æï¼šä¸ä¸Š docker ï¼Œé€ƒ~ã€ï¼Œç‰¹å†™æ­¤æ–‡ç« æ¥çºªå¿µä¸‹ğŸ¤”ğŸ‘€ï¼ˆä¹‹å‰éƒ¨ç½²çš„  Web App/Service éƒ½æ˜¯ä¸¢ç»™ [Heroku](https://www.heroku.com/)ã€[Netlify](https://www.netlify.com/)ã€GitHub è¿™æ ·çš„ PaaS å¹³å°è¿è¡Œï¼Œå†™ä¸ªé…ç½®æ–‡ä»¶ã€Œactionã€yamlã€tomlã€å°±å®Œäº‹äº†ã€‚è‡ªå·±æ•´çš„ç©æ„å„¿ä¸¢åœ¨è‡ªå·±æœåŠ¡å™¨ä¸Šè·‘çš„å¹¶ä¸ç®—å¤šï¼Œä»Šå¤©è´¹ç‚¹åŠ²ï¼Œäº†è§£ç‚¹åŸºç¡€è®¾æ–½ã€‚æ ¹æ®å†°å±±æ¨¡å‹ï¼Œäº†è§£ä¸‹ FaaS èƒ½æ›´å¥½çš„äº†è§£ [PaaS](https://shansan.top/knowledge-base/#/backend?id=iaas%e3%80%81paas%e3%80%81saas)ï¼‰ã€‚

<!-- more -->

## å†°å±±çš„åº•éƒ¨-åŸºç¡€

åœ¨æŠŠ Web åº”ç”¨ä¸¢ç»™å®ˆæŠ¤ï¼ˆdaemonï¼‰è¿›ç¨‹å‰ï¼Œåº”è¯¥äº†è§£éƒ¨åˆ†åŸºç¡€æ¦‚å¿µã€‚

>å®ˆæŠ¤è¿›ç¨‹æ˜¯åœ¨åå°è¿è¡Œä¸å—ç»ˆç«¯æ§åˆ¶çš„è¿›ç¨‹ï¼ˆå¦‚è¾“å…¥ã€è¾“å‡ºç­‰ï¼‰ã€‚

æ’å…¥ä¸ªåœºæ™¯ï¼Œæˆ‘ä»¬ä¹‹å‰åœ¨å¼€å‘ç¯å¢ƒä¸‹ï¼Œæ˜¯å¦‚ä½•è¿è¡Œ Web æœåŠ¡çš„ï¼Ÿå¯¹äº Spring Bootï¼Œæˆ‘ä»¬å¯ä»¥åœ¨ç»ˆç«¯ä½¿ç”¨ `mvn spring-boot:run` åœ¨å‰å°è·‘ Web æœåŠ¡ï¼›å¯¹äº React å‰ç«¯åº”ç”¨ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ `npm script` å³ `npm start` å¯åŠ¨å‰ç«¯ HTTP æœåŠ¡å™¨è¿›è¡Œ view å±‚é¢„è§ˆã€‚é—®é¢˜æ¥äº†ï¼Œè¿™æ ·æ“ä½œï¼ŒæœåŠ¡è¿›ç¨‹æ˜¯è·‘åœ¨å‰å°çš„ï¼ˆæ‰€è°“çš„å‰å°ä»»åŠ¡/è¿›ç¨‹ï¼‰ï¼Œå½“æˆ‘ä»¬é€€å‡ºæ“ä½œç»ˆç«¯æˆ–è€…æ‰‹åŠ¨ç»ˆæ­¢æ—¶ï¼Œè¿™äº›æœåŠ¡ä¹Ÿå°±ä¸èƒ½ç”¨äº†ï¼Œè€Œä¸”å‰å°ä»»åŠ¡ç‹¬å äº†ä¸€ä¸ªç»ˆç«¯ï¼Œä½¿å¾—æˆ‘ä»¬ä¸èƒ½å†åœ¨æ­¤ç»ˆç«¯æ‰§è¡Œå…¶ä»–å‘½ä»¤ã€‚åœ¨ç”Ÿäº§ç¯å¢ƒä¸‹ï¼Œæˆ‘ä»¬è¦è®©æœåŠ¡æŒä¹…è¿è¡Œï¼Œè¿™ç§æƒ…å†µæ˜æ˜¾ä¸æ˜¯æˆ‘ä»¬æƒ³çœ‹åˆ°çš„ï¼Œé‚£ä¹ˆï¼Œå¦‚ä½•è§£å†³è¿™ä¸ªé—®é¢˜ï¼Ÿ

> æ‰€è°“çš„å‰å°ä»»åŠ¡æ˜¯æˆ‘ä»¬å¯ä»¥ç›´æ¥çœ‹å¾—åˆ°çš„ã€‚


![å‰å°è¿›ç¨‹/ä»»åŠ¡](https://mypic-1258313760.cos.ap-guangzhou.myqcloud.com/img/20200621153114.gif)


åœ¨äº†è§£å¦‚ä½•è§£å†³é—®é¢˜å‰ï¼Œæˆ‘è§‰å¾—æœ‰å¿…è¦äº†è§£ä¸‹ä¸ºä»€ä¹ˆå‰å°ä»»åŠ¡ä¼šéšç€ session çš„é€€å‡ºè€Œé€€å‡ºï¼ˆæ”¶åˆ°äº† SIGHUPï¼‰ã€‚Linux ç³»ç»Ÿå¯¹æ­¤çš„è®¾è®¡å¦‚ä¸‹ï¼š

```text
1ã€ç”¨æˆ·å‡†å¤‡é€€å‡º session
2ã€ç³»ç»Ÿå‘è¯¥ session å‘å‡ºSIGHUPä¿¡å·
3ã€session å°†SIGHUPä¿¡å·å‘ç»™æ‰€æœ‰å­è¿›ç¨‹
4ã€å­è¿›ç¨‹æ”¶åˆ°SIGHUPä¿¡å·åï¼Œè‡ªåŠ¨é€€å‡º
```

{% folding cyan open, SIGHUP æ˜¯ä»€ä¹ˆ %}

SIGHUPï¼ˆsignal hang upï¼‰ ä¿¡å·åœ¨ç”¨æˆ·ç»ˆç«¯è¿æ¥(æ­£å¸¸æˆ–éæ­£å¸¸)ç»“æŸæ—¶å‘å‡º, é€šå¸¸æ˜¯åœ¨ç»ˆç«¯çš„æ§åˆ¶è¿›ç¨‹ç»“æŸæ—¶, é€šçŸ¥åŒä¸€ session å†…çš„å„ä¸ªä½œä¸š, è¿™æ—¶å®ƒä»¬ä¸æ§åˆ¶ç»ˆç«¯ä¸å†å…³è”. ç³»ç»Ÿå¯¹ SIGHUP ä¿¡å·çš„é»˜è®¤å¤„ç†æ˜¯ç»ˆæ­¢æ”¶åˆ°è¯¥ä¿¡å·çš„è¿›ç¨‹ã€‚

- æŸ¥çœ‹ç»´åŸºç™¾ç§‘ï¼š[Unix ä¿¡å·](https://zh.wikipedia.org/wiki/Unix%E4%BF%A1%E5%8F%B7)

{% endfolding %}

{% folding green, ä»€ä¹ˆæ˜¯è¿›ç¨‹ç»„ %}

è¿›ç¨‹ç»„æ˜¯ä¸€ç³»åˆ—ç›¸äº’å…³è”çš„è¿›ç¨‹é›†åˆï¼Œç³»ç»Ÿä¸­çš„æ¯ä¸€ä¸ªè¿›ç¨‹å¿…é¡»ä»å±äºæŸä¸€ä¸ªè¿›ç¨‹ç»„ï¼›æ¯ä¸ªè¿›ç¨‹ç»„ä¸­éƒ½ä¼šæœ‰ä¸€ä¸ªå”¯ä¸€çš„ ID(process group id)ï¼Œç®€ç§° PGIDï¼›PGID ä¸€èˆ¬ç­‰åŒäºè¿›ç¨‹ç»„çš„åˆ›å»ºè¿›ç¨‹çš„ Process IDï¼Œè€Œè¿™ä¸ªè¿›ç¨‹ä¸€èˆ¬ä¹Ÿä¼šè¢«ç§°ä¸ºè¿›ç¨‹ç»„å…ˆå¯¼(process group leader)ï¼ŒåŒä¸€è¿›ç¨‹ç»„ä¸­é™¤äº†è¿›ç¨‹ç»„å…ˆå¯¼å¤–çš„å…¶ä»–è¿›ç¨‹éƒ½æ˜¯å…¶å­è¿›ç¨‹ï¼›

è¿›ç¨‹ç»„çš„å­˜åœ¨ï¼Œæ–¹ä¾¿äº†ç³»ç»Ÿå¯¹å¤šä¸ªç›¸å…³è¿›ç¨‹æ‰§è¡ŒæŸäº›ç»Ÿä¸€çš„æ“ä½œï¼Œä¾‹å¦‚ï¼Œæˆ‘ä»¬å¯ä»¥ä¸€æ¬¡æ€§å‘é€ä¸€ä¸ªä¿¡å·é‡ç»™åŒä¸€è¿›ç¨‹ç»„ä¸­çš„æ‰€æœ‰è¿›ç¨‹ã€‚

{% endfolding %}


{% folding green, ä»€ä¹ˆæ˜¯ session %}

ä¼šè¯ï¼ˆsessionï¼‰æ˜¯ä¸€ä¸ªè‹¥å¹²è¿›ç¨‹ç»„çš„é›†åˆï¼ŒåŒæ ·çš„ï¼Œç³»ç»Ÿä¸­æ¯ä¸€ä¸ªè¿›ç¨‹ç»„ä¹Ÿéƒ½å¿…é¡»ä»å±äºæŸä¸€ä¸ªä¼šè¯ï¼›ä¸€ä¸ªä¼šè¯åªæ‹¥æœ‰æœ€å¤šä¸€ä¸ªæ§åˆ¶ç»ˆç«¯ï¼ˆä¹Ÿå¯ä»¥æ²¡æœ‰ï¼‰ï¼Œè¯¥ç»ˆç«¯ä¸ºä¼šè¯ä¸­æ‰€æœ‰è¿›ç¨‹ç»„ä¸­çš„è¿›ç¨‹æ‰€å…±ç”¨ã€‚ä¸€ä¸ªä¼šè¯ä¸­å‰å°è¿›ç¨‹ç»„åªä¼šæœ‰ä¸€ä¸ªï¼Œåªæœ‰å…¶ä¸­çš„è¿›ç¨‹æ‰å¯ä»¥å’Œæ§åˆ¶ç»ˆç«¯è¿›è¡Œäº¤äº’ï¼›é™¤äº†å‰å°è¿›ç¨‹ç»„å¤–çš„è¿›ç¨‹ç»„ï¼Œéƒ½æ˜¯åå°è¿›ç¨‹ç»„ï¼›å’Œè¿›ç¨‹ç»„å…ˆå¯¼ç±»ä¼¼ï¼Œä¼šè¯ä¸­ä¹Ÿæœ‰ä¼šè¯å…ˆå¯¼(session leader)çš„æ¦‚å¿µï¼Œç”¨æ¥è¡¨ç¤ºå»ºç«‹èµ·åˆ°æ§åˆ¶ç»ˆç«¯è¿æ¥çš„è¿›ç¨‹ã€‚åœ¨æ‹¥æœ‰æ§åˆ¶ç»ˆç«¯çš„ä¼šè¯ä¸­ï¼Œsession leader ä¹Ÿè¢«ç§°ä¸ºæ§åˆ¶è¿›ç¨‹(controlling process)ï¼Œä¸€èˆ¬æ¥è¯´æ§åˆ¶è¿›ç¨‹ä¹Ÿå°±æ˜¯ç™»å…¥ç³»ç»Ÿçš„ shell è¿›ç¨‹(login shell)ï¼›

{% endfolding %}


OKï¼Œå›åˆ°æˆ‘ä»¬çš„é—®é¢˜ï¼Œå¦‚ä½•è®©ä»»åŠ¡æŒä¹…è¿è¡Œã€ä¸å½±å“å…¶ä»–æ“ä½œã€‚è¿™æ—¶ï¼Œåå°è¿›ç¨‹å°±è¯¥ç™»åœºäº†ï¼Œå°†ä»»åŠ¡ä¸¢åœ¨åå°æ‰§è¡Œã€‚ä¸€ä¸ªä»»åŠ¡è¦ä¸¢ç»™å®ˆæŠ¤è¿›ç¨‹çš„ç¬¬ä¸€æ­¥å°±æ˜¯è¦å°†ä»–å˜ä¸ºåå°è¿›ç¨‹ã€‚å˜ä¸ºåå°è¿›ç¨‹åï¼Œä¸€ä¸ªè¿›ç¨‹æ˜¯å¦å°±æˆä¸ºäº†å®ˆæŠ¤è¿›ç¨‹å‘¢ï¼Ÿæˆ–è€…è¯´ï¼Œç”¨æˆ·é€€å‡º session ä»¥åï¼Œåå°è¿›ç¨‹æ˜¯å¦è¿˜ä¼šç»§ç»­æ‰§è¡Œï¼Ÿç­”æ¡ˆæ˜¯æœªå¿…ã€‚çœ‹å®Œåé¢å°±æ˜ç™½äº†ã€‚

## å†°å±±çš„ä¸Šå±‚-åº”ç”¨

Linux æä¾›äº†å¾ˆå¤šç§æ–¹æ³•è®©æˆ‘ä»¬å°†å‰å°è¿›ç¨‹å˜ä¸ºåå°è¿›ç¨‹ï¼ŒæŒ‘å‡ ç§ä»‹ç»ä¸‹ã€‚

### å°†å‰å°è¿›ç¨‹å˜ä¸ºåå°è¿›ç¨‹çš„å‡ ç§æ–¹å¼

#### ä½ä¸è¿ç®—ç¬¦-&

é€šè¿‡åœ¨å‘½ä»¤çš„å°¾éƒ¨åŠ ä¸ªç¬¦å·`&`å³å¯å°†è¿›ç¨‹å¯åŠ¨ä¸ºåå°è¿›ç¨‹ï¼Œåå°è¿›ç¨‹çš„ç‰¹ç‚¹å¦‚ä¸‹ï¼š

{% folding red open, åå°è¿›ç¨‹ç‰¹ç‚¹ %}

1ã€ç»§æ‰¿å½“å‰ session ï¼ˆå¯¹è¯ï¼‰çš„æ ‡å‡†è¾“å‡ºï¼ˆstdoutï¼‰å’Œæ ‡å‡†é”™è¯¯ï¼ˆstderrï¼‰ã€‚å› æ­¤ï¼Œåå°ä»»åŠ¡çš„æ‰€æœ‰è¾“å‡ºä¾ç„¶ä¼šåŒæ­¥åœ°åœ¨å‘½ä»¤è¡Œä¸‹æ˜¾ç¤ºã€‚

2ã€ä¸å†ç»§æ‰¿å½“å‰ session çš„æ ‡å‡†è¾“å…¥ï¼ˆstdinï¼‰ã€‚ä½ æ— æ³•å‘è¿™ä¸ªä»»åŠ¡è¾“å…¥æŒ‡ä»¤äº†ã€‚å¦‚æœå®ƒè¯•å›¾è¯»å–æ ‡å‡†è¾“å…¥ï¼Œå°±ä¼šæš‚åœæ‰§è¡Œï¼ˆhaltï¼‰ã€‚è¿™ä¸ªç‰¹ç‚¹ä½¿å¾—æˆ‘ä»¬å¯ä»¥æ‰§è¡Œå…¶ä»–å‘½ä»¤ã€‚

{% endfolding %}

æˆ‘ä»¬å¯ä»¥è¿è¡Œä¸€ä¸ª [FastAPI](https://fastapi.tiangolo.com/) ç¼–å†™çš„ Web æœåŠ¡è§‚å¯Ÿä¸‹ã€‚

```bash
uvicorn main:app --reload &
```

![é›†æˆäº†sessionçš„æ ‡å‡†è¾“å‡º](https://mypic-1258313760.cos.ap-guangzhou.myqcloud.com/img/20200621161927.gif)

å¯ä»¥å¾ˆæ˜æ˜¾çš„çœ‹åˆ°ï¼Œåå°è¿›ç¨‹ç»§æ‰¿äº†å½“å‰ session ï¼ˆå¯¹è¯ï¼‰çš„æ ‡å‡†è¾“å‡ºï¼ˆstdoutï¼‰ã€‚æˆ‘ä»¬çŸ¥é“è¿›ç¨‹æ”¶åˆ° SIGHUP ä¿¡å·ä¼šè¢«ç»ˆæ­¢ï¼Œé‚£ä¹ˆåå°è¿›ç¨‹æ˜¯å¦ä¼šæ”¶åˆ° SIGHUP ä¿¡å·æŒ‚æ‰ï¼Ÿæå‡ºé˜¿é‡Œäº‘æœåŠ¡å™¨å®éªŒä¸‹ã€‚

![æœ‰IOäº¤äº’çš„åå°è¿›ç¨‹](https://mypic-1258313760.cos.ap-guangzhou.myqcloud.com/img/20200621165541.gif)


è¿™ã€‚ã€‚ã€‚åå°è¿›ç¨‹åœ¨æˆ‘ä»¬é€€å‡º session åæŒ‚æ‰äº†ï¼ï¼ï¼ï¼Œè¿™æ˜¯ä¸ºå•¥ï¼Ÿé‚£æ˜¯å› ä¸ºåå°è¿›ç¨‹ä¸æ ‡å‡† I/O æœ‰äº¤äº’ï¼ˆè¿™ä¸ªæœåŠ¡æ‰“æ—¥å¿—äº†ï¼‰ï¼Œåå°è¿›ç¨‹çš„çš„æ ‡å‡† I/O ç»§æ‰¿è‡ªå½“å‰ sessionï¼Œå°±ç®—åŠ ä¸ª `&` ç¬¦å·ä¹Ÿæ²¡æœ‰æ”¹å˜è¿™ä¸€ç‰¹ç‚¹ã€‚æˆ‘ä»¬æƒ³è¦çš„æ˜¯æœåŠ¡åœ¨åå°æŒä¹…è¿è¡Œï¼Œæ€ä¹ˆè§£å†³ï¼Ÿ

Linux æä¾›äº†ä¸€ä¸ª `nohup` å‘½ä»¤å¯ä»¥å¸®æˆ‘ä»¬è§£å†³è¿™ä¸ªé—®é¢˜ã€‚

{% folding green, FastAPI Web æœåŠ¡ä»£ç  %}

```Python
# -*- coding: utf-8 -*-

from fastapi import FastAPI
from pydantic import BaseModel


app = FastAPI()

class People(BaseModel):
    name: str
    age: int
    country: str
    offer_call: bool = None

@app.get('/')
def root():
    return {"status": "hello world"}

@app.get('/person/{your_name}')
def get_people_info(your_name: str, q: int = None):
    return {"your name": your_name, "query": q}

@app.put('/person/{your_name}')
def update_people_info(your_name: str, person: People):
    return {"people name": your_name, "locate": person.age}
```

{% endfolding %}

#### é˜»æ–­ SIGHUP ä¿¡å·çš„ nohup

![nohupå‘½ä»¤çš„ä½¿ç”¨](https://mypic-1258313760.cos.ap-guangzhou.myqcloud.com/img/20200621171128.png)

å¥½äº†ï¼Œå°±ç®—ç»“æŸäº† session æ­¤ Web æœåŠ¡ä»åœ¨è¿è¡Œã€‚`nohup` å‘½ä»¤å®é™…ä¸Šå°†å­è¿›ç¨‹ä¸å®ƒæ‰€åœ¨çš„ session åˆ†ç¦»äº†ã€‚OKï¼Œè¿›ç¨‹ç”±åå°è¿›ç¨‹å˜ä¸ºå®ˆæŠ¤è¿›ç¨‹äº†ï¼ˆæœ‰é‚£å‘³äº†ï¼Œè¿˜ä¸ç®—çœŸæ­£çš„å®ˆæŠ¤è¿›ç¨‹ï¼‰ã€‚

> å®ˆæŠ¤è¿›ç¨‹åœ¨ session å…³é—­æ—¶ä¸ä¼šå—å½±å“ã€‚å®ˆæŠ¤è¿›ç¨‹çš„ä¼šè¯ç»„å’Œå½“å‰ç›®å½•ï¼Œæ–‡ä»¶æè¿°ç¬¦éƒ½æ˜¯ç‹¬ç«‹çš„ã€‚åå°è¿è¡Œåªæ˜¯ç»ˆç«¯è¿›è¡Œäº†ä¸€æ¬¡forkï¼Œè®©ç¨‹åºåœ¨åå°æ‰§è¡Œï¼Œè¿™äº›éƒ½æ²¡æ”¹å˜ã€‚

{% folding red open, nohup åšçš„é‚£äº›äº‹ %}

- é˜»æ­¢SIGHUPä¿¡å·å‘åˆ°è¿™ä¸ªè¿›ç¨‹ï¼ˆPIDï¼š14229ï¼‰ã€‚
- å…³é—­æ ‡å‡†è¾“å…¥ã€‚è¯¥è¿›ç¨‹ä¸å†èƒ½å¤Ÿæ¥æ”¶ä»»ä½•è¾“å…¥ï¼Œå³ä½¿è¿è¡Œåœ¨å‰å°ã€‚
- é‡å®šå‘æ ‡å‡†è¾“å‡ºå’Œæ ‡å‡†é”™è¯¯åˆ°æ–‡ä»¶nohup.outã€‚

{% endfolding %}

#### å®ˆæŠ¤è¿›ç¨‹ç®¡ç†å·¥å…·-systemd

Systemdï¼ˆSystem Daemonï¼‰ å¹¶ä¸æ˜¯ä¸€ä¸ªå‘½ä»¤ï¼Œè€Œæ˜¯ä¸€ç»„å‘½ä»¤ï¼Œæ¶‰åŠåˆ°ç³»ç»Ÿç®¡ç†çš„æ–¹æ–¹é¢é¢ã€‚è¿™é‡Œä¸åšä»‹ç»ï¼Œç›´æ¥ç»“åˆåœºæ™¯æ¥ç©è€ã€‚æ•™ç¨‹å¯çœ‹ï¼š[Systemd å…¥é—¨æ•™ç¨‹ï¼šå‘½ä»¤ç¯‡](http://www.ruanyifeng.com/blog/2016/03/systemd-tutorial-commands.html)ã€‚

æ˜¯æ—¶å€™æå‡º [Spring-Boot](https://gitee.com/yeshan333/body) åº”ç”¨äº†ï¼ˆmvn clean package æ„å»ºå¥½ jar åŒ…ï¼‰ã€‚å…ˆä¸ºè¿™ä¸ªåº”ç”¨å†™ä¸ª Systemd çš„é…ç½®æ–‡ä»¶`spring-boot-app.service`ï¼Œå¦‚ä¸‹

```
[Unit]
Description=Spring Boot RESTful APIs Services

[Service]
ExecStart=/usr/local/java/jdk1.8.0_221/bin/java -jar /home/www/body/target/bodymanagement-0.0.1-SNAPSHOT.jar
Restart=always
User=root
Group=root
Environment=PATH=/usr/local/java/jdk1.8.0_221/bin/java
WorkingDirectory=/home/www/body/

[Install]
WantedBy=multi-user.target
```

ç„¶åæ‰§è¡Œå¦‚ä¸‹å‘½ä»¤ï¼š

```bash
# å°†é…ç½®æ–‡ä»¶æ‹·è´åˆ° systemd ä¸­
cp spring-boot-app.service /etc/systemd/system
# é‡è½½é…ç½®æ–‡ä»¶
$ sudo systemctl daemon-reload
# å¯åŠ¨æœåŠ¡
$ sudo systemctl start spring-boot-app.service
```

è®¿é—®ï¼š[http://47.92.4.141:8080/api/user/findLatestInf](http://47.92.4.141:8080/api/user/findLatestInf)ï¼Œå³å¯çœ‹åˆ°ç½‘é¡µæ˜¾ç¤º`[]`ã€‚

```bash
$ systemctl enable spring-boot-app.service  # è®¾ç½®å¼€æœºå¯åŠ¨
Created symlink from /etc/systemd/system/multi-user.target.wants/spring-boot-app.service to /etc/systemd/system/spring-boot-app.service.
```

ä½¿ç”¨`systemctl status spring-boot-app.service`å¯ä»¥æŸ¥çœ‹æœåŠ¡çŠ¶æ€ï¼Œä½¿ç”¨`journalctl -u spring-boot-app`å¯ä»¥æŸ¥çœ‹æœåŠ¡çŠ¶æ€ã€‚

![æŸ¥çœ‹æœåŠ¡çŠ¶æ€](https://mypic-1258313760.cos.ap-guangzhou.myqcloud.com/img/20200621184905.png)

æ›´å¤šå¸¸ç”¨å‘½ä»¤å¦‚ä¸‹ï¼š

```bash
# æŸ¥çœ‹æŸä¸ª Unit çš„æ—¥å¿—
$ sudo journalctl -u nginx.service

# æŸ¥çœ‹æŸä¸ª Unit çŠ¶æ€
$ sudo systemctl status mongod

# è®©æŸä¸ª Unit å¼€æœºæ—¶å¯åŠ¨
$ sudo systemctl enable mongod

# ç«‹å³å¯åŠ¨ä¸€ä¸ªæœåŠ¡
$ sudo systemctl start apache.service

# ç«‹å³åœæ­¢ä¸€ä¸ªæœåŠ¡
$ sudo systemctl stop apache.service

# é‡å¯ä¸€ä¸ªæœåŠ¡
$ sudo systemctl restart apache.service

# æ€æ­»ä¸€ä¸ªæœåŠ¡çš„æ‰€æœ‰å­è¿›ç¨‹
$ sudo systemctl kill apache.service

# é‡æ–°åŠ è½½ä¸€ä¸ªæœåŠ¡çš„é…ç½®æ–‡ä»¶, ä¸€æ—¦é…ç½®æ–‡ä»¶ä¿®æ”¹å°±éœ€è¦ä½¿ç”¨
$ sudo systemctl reload apache.service

# æŸ¥çœ‹æŸä¸ªæœåŠ¡çš„é…ç½®æ–‡ä»¶
$ systemctl cat sshd.service

# é‡æ–°åŠ è½½æ‰€æœ‰é…ç½®æ–‡ä»¶
$ sudo systemctl daemon-reload
```

## å‚è€ƒ

- [ç½‘ç»œç¼–ç¨‹çš„ä¸‰ä¸ªé‡è¦ä¿¡å·ï¼ˆSIGHUP ï¼ŒSIGPIPEï¼ŒSIGURGï¼‰](https://blog.csdn.net/z_ryan/article/details/80952498)
- [Linux å®ˆæŠ¤è¿›ç¨‹çš„å¯åŠ¨æ–¹æ³•](http://www.ruanyifeng.com/blog/2016/02/linux-daemon.html)
- [ä»€ä¹ˆæ˜¯å®ˆæŠ¤è¿›ç¨‹](https://www.zhihu.com/question/38609004)
- [Node åº”ç”¨çš„ Systemd çš„å¯åŠ¨](http://www.ruanyifeng.com/blog/2016/03/node-systemd-tutorial.html)